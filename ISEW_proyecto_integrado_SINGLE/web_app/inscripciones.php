<?php $nombre=trim($_POST['nombre']??'');$email=trim($_POST['email']??'');$curso=trim($_POST['curso']??'');$er=[];if(strlen($nombre)<2)$er[]='Nombre demasiado corto';if(!filter_var($email,FILTER_VALIDATE_EMAIL))$er[]='Email inválido';if($curso==='')$er[]='Curso requerido';if($er){http_response_code(400);echo '<h1>Errores</h1><ul>';foreach($er as $x){echo '<li>'.htmlspecialchars($x).'</li>'; } echo '</ul><a href="index.php">Volver</a>';exit;} $dir=__DIR__.'/data'; if(!is_dir($dir)) mkdir($dir,0777,true); $fp=fopen($dir.'/inscripciones.csv','a');fputcsv($fp,[date('c'),$nombre,$email,$curso]);fclose($fp); echo '<!doctype html><html lang="es"><head><meta charset="utf-8"><title>Inscripción realizada</title><link rel="stylesheet" href="assets/styles.css"></head><body><main><h1>¡Inscripción realizada!</h1><p>Gracias <strong>'.htmlspecialchars($nombre).'</strong>. Curso: <strong>'.htmlspecialchars($curso).'</strong>.</p><p>Te contactaremos en: <strong>'.htmlspecialchars($email).'</strong>.</p><a href="index.php">Volver</a></main></body></html>'; ?>